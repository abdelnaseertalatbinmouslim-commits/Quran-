<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>المصحف المكتوب | روحانيات</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-4 md:p-8">

    <div class="bulb-string">
        <div class="bulb" style="color: #ffdf00; background: #ffdf00;"></div>
        <div class="bulb" style="color: #00ff00; background: #00ff00; animation-delay: 0.4s"></div>
    </div>

    <nav class="max-w-6xl mx-auto mb-8 flex justify-between items-center">
        <a href="index.html" class="glass-card px-6 py-2 text-gold text-sm">العودة للرئيسية</a>
        <h2 class="gold-title text-2xl font-black">الفهرس المرتّب</h2>
    </nav>

    <div class="max-w-6xl mx-auto grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4" id="surah-list">
        </div>

    <div id="reader-modal" class="fixed inset-0 z-[2000] hidden bg-black/90 backdrop-blur-md overflow-y-auto p-4">
        <div class="max-w-4xl mx-auto glass-card p-6 md:p-10 my-10 relative">
            <button onclick="closeReader()" class="absolute top-4 left-4 text-gold text-3xl font-black">&times;</button>
            <h3 id="modal-title" class="gold-title text-4xl text-center mb-10 quran-font"></h3>
            <div id="modal-content" class="quran-font text-3xl md:text-4xl leading-[2.5] text-center text-white/90">
                جاري التحميل...
            </div>
        </div>
    </div>

    <script>
        // تحميل الفهرس
        async function loadIndex() {
            const res = await fetch('https://api.alquran.cloud/v1/surah');
            const data = await res.json();
            const list = document.getElementById('surah-list');
            
            data.data.forEach(s => {
                const card = document.createElement('div');
                card.className = 'glass-card p-4 text-center cursor-pointer hover:bg-yellow-500/10 transition-all';
                card.onclick = () => openSurah(s.number, s.name);
                card.innerHTML = `
                    <span class="text-xs text-yellow-500">#${s.number}</span>
                    <h4 class="text-xl font-bold text-white mt-1">${s.name}</h4>
                    <p class="text-[10px] text-gray-400">${s.numberOfAyahs} آية</p>
                `;
                list.appendChild(card);
            });
        }

        // فتح السورة للقراءة
        async function openSurah(num, name) {
            const modal = document.getElementById('reader-modal');
            const content = document.getElementById('modal-content');
            const title = document.getElementById('modal-title');
            
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            title.innerText = name;
            content.innerHTML = "<p class='animate-pulse'>بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ...</p>";

            const res = await fetch(`https://api.alquran.cloud/v1/surah/${num}`);
            const data = await res.json();
            
            content.innerHTML = data.data.ayahs.map(a => 
                `${a.text} <span class="text-yellow-600 font-bold text-2xl mx-1">﴿${a.numberInSurah}﴾</span>`
            ).join(' ');
        }

        function closeReader() {
            document.getElementById('reader-modal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        window.onload = loadIndex;
    </script>
</body>
</html>
